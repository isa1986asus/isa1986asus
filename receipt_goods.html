
<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¨Ø¶Ø§Ø¦Ø¹</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/smtp.js@3.0.0/src/smtp.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; direction: rtl; text-align: right; margin: 20px; padding: 10px; }
        label, select, input { display: block; margin-bottom: 10px; width: 100%; padding: 8px; }
        button { background-color: #28a745; color: white; padding: 10px; border: none; cursor: pointer; width: 100%; margin-top: 10px; }
        button:hover { background-color: #218838; }
        .item-container { border: 1px solid #ddd; padding: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <h2>ğŸ“¦ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¨Ø¶Ø§Ø¦Ø¹</h2>

    <label>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…:</label>
    <input type="text" id="name" required>

    <label>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</label>
    <input type="date" id="date" required>

    <label>â° Ø§Ù„ÙˆÙ‚Øª:</label>
    <input type="time" id="time" required>

    <div id="items-container"></div>

    <button onclick="addItem()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
    <button onclick="generatePDF()">ğŸ“© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>

    <script>
        let itemsList = {
            "ÙÙˆØ§ÙƒÙ‡": ["ØªÙØ§Ø­", "Ù…ÙˆØ²", "Ø¨Ø±ØªÙ‚Ø§Ù„", "Ø¹Ù†Ø¨", "ÙƒÙŠÙˆÙŠ", "Ø£Ù†Ø§Ù†Ø§Ø³", "Ù…Ø§Ù†Ø¬Ùˆ", "Ø±Ù…Ø§Ù†", "ÙƒÙ…Ø«Ø±Ù‰"],
            "Ø®Ø¶Ø±ÙˆØ§Øª": ["Ø¨Ø·Ø§Ø·Ø³", "Ø·Ù…Ø§Ø·Ù…", "Ø¬Ø²Ø±", "Ø®ÙŠØ§Ø±", "Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†", "Ø¨ØµÙ„", "Ø«ÙˆÙ…", "ÙÙ„ÙÙ„", "ÙØ¬Ù„"],
            "ÙˆØ±Ù‚ÙŠØ§Øª": ["Ø¨Ù‚Ø¯ÙˆÙ†Ø³", "ÙƒØ²Ø¨Ø±Ø©", "Ø®Ø³", "Ø³Ø¨Ø§Ù†Ø®", "Ù†Ø¹Ù†Ø§Ø¹", "Ø¬Ø±Ø¬ÙŠØ±", "Ø´Ø¨Øª", "Ø±ÙŠØ­Ø§Ù†", "Ù…Ù„ÙˆØ®ÙŠØ©"]
        };

        function addItem() {
            let itemDiv = document.createElement("div");
            itemDiv.className = "item-container";

            let categorySelect = document.createElement("select");
            categorySelect.innerHTML = "<option value=''>-- Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØµÙ†Ù --</option><option value='ÙÙˆØ§ÙƒÙ‡'>ÙÙˆØ§ÙƒÙ‡</option><option value='Ø®Ø¶Ø±ÙˆØ§Øª'>Ø®Ø¶Ø±ÙˆØ§Øª</option><option value='ÙˆØ±Ù‚ÙŠØ§Øª'>ÙˆØ±Ù‚ÙŠØ§Øª</option>";
            categorySelect.onchange = function() { updateItemList(itemDiv, this.value); };

            let itemSelect = document.createElement("select");
            itemSelect.innerHTML = "<option value=''>-- Ø§Ø®ØªØ± Ø§Ù„ØµÙ†Ù --</option>";

            let quantityInput = document.createElement("input");
            quantityInput.type = "number";
            quantityInput.placeholder = "Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ©";

            let unitSelect = document.createElement("select");
            unitSelect.innerHTML = "<option value='ÙƒÙŠÙ„Ùˆ'>ÙƒÙŠÙ„Ùˆ</option><option value='ØºØ±Ø§Ù…'>ØºØ±Ø§Ù…</option>";

            itemDiv.appendChild(categorySelect);
            itemDiv.appendChild(itemSelect);
            itemDiv.appendChild(quantityInput);
            itemDiv.appendChild(unitSelect);

            document.getElementById("items-container").appendChild(itemDiv);
        }

        function updateItemList(container, category) {
            let itemSelect = container.children[1];
            itemSelect.innerHTML = "<option value=''>-- Ø§Ø®ØªØ± Ø§Ù„ØµÙ†Ù --</option>";

            if (category && itemsList[category]) {
                itemsList[category].forEach(item => {
                    let option = document.createElement("option");
                    option.value = item;
                    option.textContent = item;
                    itemSelect.appendChild(option);
                });
            }
        }

        function generatePDF() {
            let { jsPDF } = window.jspdf;
            let doc = new jsPDF();

            let name = document.getElementById("name").value;
            let date = document.getElementById("date").value;
            let time = document.getElementById("time").value;
            let items = document.querySelectorAll(".item-container");

            if (!name || !date || !time || items.length === 0) {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.");
                return;
            }

            doc.text("ğŸ“¦ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¨Ø¶Ø§Ø¦Ø¹", 10, 10);
            doc.text(`ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}`, 10, 20);
            doc.text(`ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}`, 10, 30);
            doc.text(`â° Ø§Ù„ÙˆÙ‚Øª: ${time}`, 10, 40);
            doc.text("ğŸ›’ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:", 10, 50);

            let y = 60;
            items.forEach(item => {
                let category = item.children[0].value;
                let itemName = item.children[1].value;
                let quantity = item.children[2].value;
                let unit = item.children[3].value;

                doc.text(`- ${category} | ${itemName}: ${quantity} ${unit}`, 10, y);
                y += 10;
            });

            doc.save("ÙˆØ±Ù‚Ø©_Ø§Ø³ØªÙ„Ø§Ù….pdf");
            sendEmail(name, date, time, items);
        }

        function sendEmail(name, date, time, items) {
            let emailBody = `ğŸ“¦ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¨Ø¶Ø§Ø¦Ø¹\n\nğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}\nğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}\nâ° Ø§Ù„ÙˆÙ‚Øª: ${time}\n\nğŸ›’ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:\n`;
            
            items.forEach(item => {
                let category = item.children[0].value;
                let itemName = item.children[1].value;
                let quantity = item.children[2].value;
                let unit = item.children[3].value;

                emailBody += `- ${category} | ${itemName}: ${quantity} ${unit}\n`;
            });

            Email.send({
                SecureToken: "YOUR_SMTP_SECURE_TOKEN",
                To: "example@example.com", // Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù
                From: "your-email@example.com", // Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…Ø±Ø³Ù„
                Subject: "ğŸ“¦ Ø§Ø³ØªÙ„Ø§Ù… Ø¨Ø¶Ø§Ø¦Ø¹ Ø¬Ø¯ÙŠØ¯Ø©",
                Body: emailBody.replace(/\n/g, "<br>")
            }).then(
                message => alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ù†Ø¬Ø§Ø­!")
            );
        }
    </script>

</body>
</html>
